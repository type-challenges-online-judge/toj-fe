name: TOJ CI

on:
  pull_request:
    branches: ["main"]

jobs:
  changes:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“¥ì €ì¥ì†Œì˜ ì½”ë“œ ê°€ì ¸ì˜¤ê¸°
        uses: actions/checkout@v3

      - name: ğŸ·ë…¸ë“œ ë²„ì „ ì„¤ì •
        uses: actions/setup-node@v3
        with:
          node-version: 18.17.1

      - name: ğŸ’½ë…¸ë“œ íŒ¨í‚¤ì§€ ìºì‹±
        uses: actions/cache@v3
        id: npm-cache
        with:
          path: ./node_modules
          key: ${{ github.event.repository.name }}-node-${{ hashFiles('**/package-lock.json') }}

      - name: ğŸ“¦íŒ¨í‚¤ì§€ ì„¤ì¹˜ (ìºì‹œë˜ì§€ ì•Šì•˜ì„ ê²½ìš°)
        if: steps.npm-cache.outputs.cache-hit != 'true'
        run: npm ci

      - run: npm run lint --if-present
      - run: npm run test --if-present
      - run: npm run build --if-present
